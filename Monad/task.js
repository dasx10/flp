import future from"./future.js";import promise from"./promise.js";var o=Array(),i=0,z=(x)=>(i--,((o.length>0)&&o.shift()()),(x));export default(x)=>future((y,e)=>(i)?promise((right,left)=>o.push(()=>x((x)=>left(y(z(x))),(x)=>right(e(z(x)))))):(i++,x((x)=>(y(z(x))),(x)=>(e(z(x))))));
